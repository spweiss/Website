<!DOCTYPE html>
<html>
  <body class="content">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.css" integrity="sha384-9tPv11A+glH/on/wEu99NVwDPwkMQESOocs/ZGXPoIiLE8MU/qkqUcZ3zzL+6DuH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.js" integrity="sha384-U8Vrjwb8fuHMt6ewaCy8uqeUXv4oitYACKdB0VziCerzt011iQ/0TqlSlv8MReCm" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/contrib/auto-render.min.js" integrity="sha384-aGfk5kvhIq5x1x5YdvCp4upKZYnA8ckafviDpmWEKp4afOZEqOli7gqSnh8I6enH" crossorigin="anonymous"></script>

    <h1>Alphabet Soup</h1>

    <h2>Sabermetrics of some sort</h2>

    <p>Whitespace?</p>

    <p>
    Introduction
    </p>

    <p>
    Batting average is a popularly recognized and understood measure of
    hitter performance, at least in part because it is concise and easy to
    remember. It is simply hits per at-bat, or the likelihood that a particular
    at-bat for a given player will result in a hit.
    </p>

    <p class="math">
    BA = \frac{H}{AB}
    </p>

    <p>
    Since hits are the sum of singles, doubles, triples, and home runs, let's
    now express batting average in terms of those quantities.
    </p>

    <p class="math">
    BA = \frac{1B+2B+3B+HR}{AB}
    </p>

    <p>
    If you have any familiarity with baseball, it may now be clear to you that
    there are some glaring omissions here. First, there are other ways to reach
    base than by getting a hit, and second, a player should not be credited the
    same amount for a single and a home run.
    </p>

    <p>
    Gifs of a home run and a single
    </p>

    <p>
    Before we begin to address some of these issues, let's again re-express
    batting average in a way that will help us later on. Rather than hits, we
    can write the numerator as the dot product of a performance vector and a
    weights vector.
    </p>

    <p class="math">\vec{p} \cdot \vec{w}</p>

    <p>
    We will continue to use this formulation throughout this study, though the
    defintions of the vectors will change. In the case of batting average, the
    performance vector for a player has elements for the number of singles,
    doubles, triples, and home runs, and the weights vector is composed of all
    ones.
    </p>

    <p class="math">\vec{p}_{BA} \cdot \vec{w}_{BA} = \begin{bmatrix} 1B\\
      2B\\ 3B\\ HR \end{bmatrix} \cdot \begin{bmatrix} 1\\ 1\\ 1\\ 1
      \end{bmatrix}</p>
    <p class="math">BA = \frac{\vec{p}_{BA} \cdot \vec{w}_{BA}}{AB} =
      \frac{1 \cdot 1B + 1 \cdot 2B + 1 \cdot 3B + 1 \cdot HR }{AB} =
      \frac{1B+2B+3B+HR}{AB}</p>

    <p>
    To address the most glaring issues noted above, let's now consider some
    other existing statistics you may have heard of. First, on-base percentage
    (OBP), which is a metric of the frequency that a player reaches base. In
    order to do that, we will change the definition of the performance vector to
    include walks (BB) and hit-by-pitch events (HBP), each also weighted as one.
    In addition, since there are more events that a player can use to reach base
    according to OBP, we have to make some changes to the denominator. We will
    set this to at-bats plus walks plus hit-by-pitch events plus sacrifice flies
    (another way to get out) to capture all possible events in this model.
    </p>

    <p class="math">\vec{p}_{OBP} \cdot \vec{w}_{OBP} = \begin{bmatrix} 1B\\
      2B\\ 3B\\ HR\\ BB\\ HBP \end{bmatrix} \cdot \begin{bmatrix} 1\\ 1\\ 1\\
      1\\ 1\\ 1 \end{bmatrix}</p>
    <p class="math">OBP = \frac{\vec{p}_{OBP} \cdot \vec{w}_{OBP}}{AB+BB+HBP} =
      \frac{1 \cdot 1B + 1 \cdot 2B + 1 \cdot 3B + 1 \cdot HR + 1 \cdot BB + 1
      \cdot HBP}{AB+BB+HBP+SF} = \frac{1B+2B+3B+HR+BB+HBP}{AB+BB+HBP+SF}</p>

    <p>
    This does a better job of capturing the ways that hitters can contribute
    outside of hits, but still does not consider the relative values of each
    event. Starting again from batting average, we now consider another existing
    metric you may have heard of. Slugging percentage (SLG) is a measure of a
    player's power, assigning more weight to more bases generated. In this case,
    the weight for an event is equal to the number of bases generated, so that a
    double has weight 2 and a home run has weight 4. Thus, the only change we
    make to batting average to find slugging percentage is to change the
    elements of the weights vector to 1, 2, 3, and 4.
    </p>

    <p class="math">\vec{p}_{SLG} \cdot \vec{w}_{SLG} = \begin{bmatrix} 1B\\
      2B\\ 3B\\ HR \end{bmatrix} \cdot \begin{bmatrix} 1\\ 2\\ 3\\ 4
      \end{bmatrix}</p>
    <p class="math">SLG = \frac{\vec{p}_{SLG} \cdot \vec{w}_{SLG}}{AB} =
      \frac{1 \cdot 1B + 2 \cdot 2B + 3 \cdot 3B + 4 \cdot HR}{AB}</p>

    <p>
    The numerator of the above expression is sometimes called total bases (TB),
    since the dot product of the two vectors results in the sum of the bases a
    player would gain on the hits made.
    </p>

    <p class="math">SLG = \frac{\vec{p}_{SLG} \cdot \vec{w}_{SLG}}{AB} =
      \frac{TB}{AB}</p>

    <p>
    Now we have addressed each of the above problems separately, by accounting
    for non-hit production in OBP and by weighting different outcomes
    differently in SLG, but neither is able to fix both problems simultaneously.
    One common solution is to simply add the two statistics together. This
    results in a metric aptly named on-base plus slugging (OPS) which has been
    increasing in popularity among non-sabermetricians in recent years.
    </p>

    <p class="math">OPS=OBP+SLG=\frac{H+BB+HBP}{AB+BB+HBP+SF}+\frac{TB}{AB}</p>

    <p>
    OPS does a much better job at encapsulating hitter performance than the
    metrics we have seen so far, but as you can see above, the formula is a bit
    of a mess. More importantly though, there is not much conceptual motivation
    for adding OBP and SLG together besides the fact that it seems like it might
    help. The easiest way to see this is that the deonominators of the fractions
    are different. Also, the notion of performance and weight vectors breaks
    down (the statistics are in different vector spaces). Since it is crudely
    amalgamating performance over two different reference frames, OPS doesn't
    have any conceptual meaning. In addition, there is a sneakier reason why
    slugging percentage (and by extension, OPS) is suboptimal. While it is true
    that we shouldn't consider singles and triples the same and we can be
    reasonably confident that triples are worth more than singles, there is no
    reason we can assume that triples should be weighted exactly three times as
    much as singles. We will have to make some slightly more subtle adjustments
    to improve from here, but there is still much more ground to gain.
    </p>

    <p>
    As a starting point, we know that we would like to include more outcomes
    than just hits, so let's establish a vector space with
    </p>

    <p>
    In math-heavy article, each batting stat as a dot product of two vectors,
    where the first is a performance vector with the numbers of each event that
    occur for a player, and the second is a weights vector with the
    ceoffiecients on each. For instance, the weights on BA are [1,1,1,1,...],
    slugging are [1,2,3,4], wOBA are [Fangraphs Guts], etc. The weights on the
    performance vector are the offical score of the game for all except xwOBA,
    where they are replaced by expected values via Hit Probability as a function
    of Exit Velocity and Launch Angle from Statcast. Hit Probability compares
    the EV and LA of a hit against all other hits of the same time since the
    introduction of Statcast in 2015 (how many batted balls since them?) and
    determines the likelihood that a batted ball will be a single, double, etc.
    This transitions the performance vector from field outcome to quality of
    contact, meaning that it is more tightly linked to hitter performance at the
    plate.
    </p>

    <p class="math">
    2+\frac{1}{x}
    </p>

    <p class="math">\Gamma (x) = \int^\infty_0 dx</p>

    <p>
    Compare against BABIP
    </p>

    <p>
    Factors still not accounted for: baserunning, park factors, and (the
    remaining) luck, but these are likely small.
    </p>

    <p>
    Credit Tom Tango for creating wOBA in The Book and Baseball Savant for
    calculating xwOBA
    </p>

    <p>
    Hit probability article (good examples, videos): https://www.mlb.com/news/statcast-introduces-hit-probability-for-2017/c-217705412
    Hit probability defintion: http://m.mlb.com/glossary/statcast/hit-probability
    xwOBA definition: http://m.mlb.com/glossary/statcast/expected-woba
    xwOBA background: https://www.fangraphs.com/blogs/how-i-use-xwoba/
    wOBA and xwOBA: https://www.fangraphs.com/blogs/what-can-statcast-tell-us-this-early-in-the-season/
    Baserunning and xwOBA-wOBA: https://www.fangraphs.com/blogs/how-to-beat-statcasts-hitting-metric/
    Guts for every season back to 1871: https://www.fangraphs.com/guts.aspx?type=cn
    </p>

  </body>

  <script>
    var math = document.getElementsByClassName("math");
    for (var i = 0; i < math.length; i++) {
      katex.render(math[i].innerHTML, math[i], { displayMode: true });
    }
  </script>

</html>
